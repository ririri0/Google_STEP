# Google STEP Class 4 Homework

## 概要
1. 始点と目的地を入力すると経路を出力するプログラム  
2. "Google"から"渋谷"までの経路を出力するプログラム(1にワードを埋め込み)  
3. ページランクを求めるプログラム  
以上の3点のプログラムを作成しました。


## 準備
[wikipedia_data.zip](https://drive.google.com/file/d/1zqtjSb-ZoR4rzVUWZrjNSES5GKJhYmmH/view?usp=sharing) をダウンロードして解凍し、以下のようなディレクトリ構成にしてください。

```
Week_4
├── data
│   ├── graph_small.png
│   ├── links_small.txt
│   ├── links.txt
│   ├── pages_small.txt
│   └── pages.txt
├── .gitignore
├── README.md
├── search_route.py
├── search_route_Google.py
├── page_rank.py
└── page_rank_result.ipynb
```

## 実行方法

### 1. 始点と目的地を入力すると経路を出力するプログラム
以下のように実行してください。

```
python3 search_route.py
```

Start > には始点の文字列を入力してください。  
Destination > には目的点の文字列を入力してください。  


### 2. "Google"から"渋谷"までの経路を出力するプログラム(1にワードを埋め込み)
以下のように実行してください。

```
python3 search_route_Google.py
```


### 3. ページランクを求めるプログラム
以下のように実行してください。

```
python3 page_rank.py
```
Times > には「各頂点のスコアを隣接する頂点に等分して分配する」操作を何回繰り返すか、整数を入力してください。  
Initial Score > には、各頂点の初期スコアを何点にするのか、整数を入力してください。  
Number of outputs > には、スコア降順で、何位までのページを出力するのか、整数を入力してください。全ての順位を出力したい場合は、整数ではなく"ALL"を入力してください。 



## 仕様

### 1. 始点と目的地を入力すると経路を出力するプログラム
- 幅優先探索を用いて最短経路を探索しています。
- 用いるキューはクラスにまとめています。
- 始点もしくは目的点として入力した文字列がpagesに登録されていない場合は、「NOT FOUND ID OF "文字列"」と出力されます。
- 経路が見つからなかった場合は、「NOT FOUND ROUTE」と出力されます。
- 経路順に、ID、タイトルがそれぞれのタイトルに対して出力されます。
- 最悪計算量はO(|E|+|V|)です。

### 2. "Google"から"渋谷"までの経路を出力するプログラム(1にワードを埋め込み)
- search_route.pyの標準入力待ち変数に文字列を直接埋め込んでいます。


### 3. ページランクを求めるプログラム
- 辞書の順序を用いているため、python 3.7以降必須です。
- 「Number of outputs」でALL以外の無効な文字列を入力した場合、「Please Enter the Correct Value」と出力される。
- どのページからもリンクのないタイトル(そのタイトル自体からリンクが存在する場合もある)のスコアは0です。
- スコア降順で出力がされます。
- 順位、ID, タイトル, スコアがそれぞれのページに対して出力されます。
- AddScoreの終盤、スコアがついていないページのスコアを0として代入しています。これは全てのページを見ているため、追加でO(V)の計算量となっています。  
スコアが0のページを無視していいなら、前のループのfor id in links:の中のif文を工夫することで複数回繰り返しする計算にも対応できます。また、ループが全て終わった結果に対して0点を持つタイトルについて処理する手段をとることができます。  
以上の工夫を行うとオーダーは減らないものの計算量を少なくすることができますが、今回は可読性のために行なっていません。
- AddScoreのfor文が二重になっていますが、この二重になっている部分の計算量はO(|E|)です。
- 初期スコアは自由に定められるようなプログラムになっていますが、例えば初期スコア10と100ではそれぞれのページの得点の桁が1桁違う結果になるだけであって、アルゴリズムをよく考えますとあまりここに意味はないですね。

結果は実行しなくても見れるように、page_rank_result.ipynbにまとめました。  
初期スコア100、「各頂点のスコアを隣接する頂点に等分して分配する」操作の試行回数1, 2, 5, 10, 20の場合について記載しました。


## 計算時間の参考
どのプログラムも大きいデータファイルを使用した場合、數十分実行時間がかかります。  
私の実行環境では、データの読み込みだけで10分近くかかりました。 

実行時間例  search_route_Google.py   
環境　MacBookAir2015 メモリ8GB  
real	8m16.163s  
user	2m6.549s  
sys	    4m29.003s  


